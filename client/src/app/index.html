<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Mushrooms Sample Pack - Demo</title>
    <link rel="icon" href="./favicon.ico" type="image/icon type">
    <link rel="stylesheet" href="./style.css">
</head>
<body>

    <div id="parent-container-all">
        <div id="BACKGROUND"></div>

        <div id="content-container">

            <div class="info">
                <h1>Sweet Mushrooms Sample Pack - Demo</h1>
                <p>The Sweet Mushrooms Sample pack will be one of the best and most exciting sound pack projects I've ever created. 
                   While the pack is still in development, as I want to ensure a high-quality product, Iâ€™d like to share some freebies 
                   with you all. Enjoyyy!"
                </p>
            </div>

            <div class="the-form-section">
            <div class="pack-image">
                <img src="./Sweet Mushrooms - Sample Pack - Art - Demo Version.png" alt="Sample Pack Demo Image">
            </div>
            <form id="formSubmit"> 
               <input class="input1" placeholder="Name" type="text" name="name"  required />
               <input class="input" placeholder="Email" type="email" name="email" required />
               <button type="submit">Get Demo</button>
            </form>
        </div>
        <p style="color: white; font-size: 8px;">By signing up for your free demo, you agree to receive updates on upcoming sound-packs from Cultertraz.</p>
    </div>
</div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("formSubmit").addEventListener("submit", async function(event) {
                event.preventDefault();
                console.log("Form submission reload on submit prevented");
    
                const formData = new FormData(this);
                const data = {
                    name: formData.get("name"),
                    email: formData.get("email")
                };
    
                try {
                    const response = await fetch("https://sweet-mushrooms-samplepack-landing-page.vercel.app/api/form", { // Update this URL
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(data)
                    });
    
                    const result = await response.json();
                    console.log(result);
    
                    if (response.ok) {
                        alert("The Mushroom Sample Pack Freebie has been sent to your email!");
                        formSubmit.reset();

                    } else {
                        console.log("Error: " + result);
                    }
                } catch (error) {
                    console.error("Error:", error);
                }
            });
        });
    </script>
</body>
</html>